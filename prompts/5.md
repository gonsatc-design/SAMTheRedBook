üõ°Ô∏è D√çA 05: SALA DE GUERRA Y DASHBOARD MMO (ANALYTICS)

Bloque 1: El Escriba de Gondor (Agregaci√≥n de Datos para Gr√°ficas)
Contexto: Necesitamos transformar las filas de la base de datos en coordenadas para las gr√°ficas. No pintamos tareas, pintamos tendencias.Prompt:"SAM, iniciamos el D√≠a 05. Necesito la infraestructura de datos para el Dashboard.Crea un endpoint en el backend /api/stats/personal que devuelva un resumen de los √∫ltimos 7 d√≠as:Cantidad de tareas por categor√≠a (trabajo, salud, etc.).√çndice de 'Efectividad de Combate' (Tareas completadas vs. Generadas).Evoluci√≥n del Nivel de Sombra acumulado.Implementa una funci√≥n de agregaci√≥n en SQL para optimizar la carga, evitando traer todas las tareas y procesarlas en JS.Escribe un test con Supertest que valide que la respuesta del endpoint es un JSON estructurado listo para ser consumido por Chart.js.Aseg√∫rate de que los c√°lculos de porcentajes usen aritm√©tica de precisi√≥n para evitar errores de redondeo en las gr√°ficas."

Bloque 2: Sincronizaci√≥n de la Guerra Total (Global HP)
Contexto: El usuario debe sentir que su granito de arena baja la vida a un enemigo com√∫n.Prompt:"Estructura personal lista. Ahora, conectamos con el Frente Global.Implementa una ruta /api/stats/global que consulte la tabla world_events.La l√≥gica debe calcular el da√±o total infligido a Sauron: $HP_{actual} = HP_{max} - \sum(Misiones\_Exitosas_{totales} \times Multiplicador)$.Configura un sistema de polling (o Supabase Realtime si es posible) para que el HP del Jefe Mundial se actualice en el frontend cada 60 segundos sin recargar la p√°gina.Escribe un test que simule la compleci√≥n de una tarea y verifique que el HP global de Sauron en la base de datos disminuye proporcionalmente. Tono t√©cnico, modo JARVIS."

Bloque 3: Visualizaci√≥n T√°ctica (Integraci√≥n de Chart.js)
Contexto: Aqu√≠ es donde "vendemos" el proyecto. La interfaz debe parecer un mapa t√°ctico militar de la Tierra Media.Prompt:"Datos en el frente. Procedemos a la Visualizaci√≥n de Combate.Integra la librer√≠a Chart.js en el index.html.Crea dos visualizaciones principales:Radar Chart: 'Equilibrio de la Luz' (Muestra en qu√© categor√≠as eres m√°s fuerte).Line Chart: 'Avance de la Sombra' (Progreso de enemigos acumulados vs. d√≠as).Dise√±a una Barra de Vida √âpica para Sauron en la parte superior del Dashboard con degradados de fuego y animaciones de sacudida (shake) cuando el HP baje.Aplica estilos CSS para que las gr√°ficas tengan una est√©tica 'vintage' (colores √°mbar, pergamino y l√≠neas punteadas). Usa fuentes monoespaciadas para los n√∫meros."

Bloque 4: Navegaci√≥n y Consolidaci√≥n UX
Contexto: El usuario debe poder saltar entre el Chat (Acci√≥n) y la Sala de Guerra (An√°lisis).Prompt:"Finalizamos el D√≠a 05 con la Estructura de Navegaci√≥n.Crea una barra de navegaci√≥n inferior (Tab Bar) con iconos t√°cticos: üìú (Diario), üó∫Ô∏è (Sala de Guerra), üë§ (Perfil).Implementa la l√≥gica de cambio de vistas mediante hidden de Tailwind, asegurando que el estado del chat no se pierda al cambiar de pesta√±a.A√±ade un bot√≥n de 'Compartir Victoria' que genere un peque√±o resumen textual de tus estad√≠sticas para copiar al portapapeles.Escribe un test de integraci√≥n que verifique que al hacer click en 'Sala de Guerra', las gr√°ficas se disparan y renderizan correctamente los datos del backend.Entrega el c√≥digo con mentalidad 'Siempre a Muerte'."