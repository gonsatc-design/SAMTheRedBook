üõ°Ô∏è D√çA 08: EL RETORNO DEL REY (OPTIMIZACI√ìN Y DESPLIEGUE)
Bloque 1: Estandarte M√≥vil (PWA - Progressive Web App)
Contexto: El usuario debe llevar a S.A.M. en el bolsillo. Queremos que se instale como una app nativa, sin barra de navegador. Prompt:

"SAM, iniciamos el D√≠a 08. Vamos a convertir el Libro Rojo en una PWA.

Genera un archivo manifest.json completo con:

Nombre: 'S.A.M. - El Libro Rojo'.

Tema: Colores oscuros (#0f172a) y fondo de pizarra (#1e293b).

Iconos: Define las rutas para tama√±os 192x192 y 512x512 (usaremos placeholders por ahora).

Crea un service-worker.js b√°sico que cachee los archivos est√°ticos (index.html, styles.css, audios) para que la app cargue instant√°neamente incluso sin red (Offline Mode).

A√±ade el script de registro del Service Worker en el index.html.

Escribe un test (o instruyeme c√≥mo verificarlo en Chrome DevTools) para confirmar que el navegador detecta la app como 'Instalable'."

Bloque 2: El Informe de Aragorn (Reinicio Semanal)
Contexto: El domingo a las 23:59, la guerra termina. Se archivan las estad√≠sticas y se limpia el tablero para el lunes. Prompt:

"La app es m√≥vil. Ahora, el Ciclo de Vida. Necesito programar el Reinicio Dominical.

Crea una funci√≥n as√≠ncrona en el servidor ejecutarReinicioSemanal().

La l√≥gica debe:

Calcular el resumen de la semana (Total XP ganada, Da√±o a Sauron, Tareas Completadas).

Guardar ese resumen en una tabla hist√≥rica weekly_reports.

Resetear los contadores de horda (Orcos/Uruk-hais) de todos los usuarios a 0.

Enviar un mensaje al buz√≥n de cada usuario: 'Informe de Aragorn: [Resumen]'.

Configura un Cron Job (usando node-cron o instrucciones para Supabase Edge Functions) que ejecute esto autom√°ticamente cada domingo a las 23:59.

Escribe un test que fuerce la ejecuci√≥n de esta funci√≥n y verifique que los contadores de la base de datos vuelven a cero sin borrar el historial."

Bloque 3: La Coronaci√≥n en la Nube (Preparaci√≥n para Deploy)
Contexto: Salimos de localhost. El c√≥digo debe adaptarse a un entorno real (Vercel, Railway o Render). Prompt:

"L√≥gica cerrada. Preparamos el Despliegue Final.

Audita mi server.js y package.json:

Asegura que el puerto usa process.env.PORT.

Configura las pol√≠ticas CORS para aceptar peticiones solo desde mi dominio de producci√≥n (cuando lo tenga).

Crea un archivo .env.example para saber qu√© variables de entorno debo configurar en el servidor en la nube (SUPABASE_URL, API_KEYS, etc.).

Genera un script de 'Build' si es necesario, o confirma el start script.

Expl√≠came paso a paso c√≥mo conectar este repositorio a Vercel (para el front) y Render/Railway (para el back), asegurando que la base de datos de Supabase admite conexiones externas."

Bloque 4: Protocolo de Victoria (UX Final & Meta Tags)
Contexto: La primera impresi√≥n cuenta. Al compartir el enlace, debe verse √©pico. Prompt:

"Finalizamos el Proyecto S.A.M. con el Pulido Final.

Genera las etiquetas <meta> para SEO y Open Graph (Twitter/WhatsApp/Discord). Quiero que al compartir el link salga: 'S.A.M. - ¬øPodr√°s vencer a la Sombra?'.

Implementa una pantalla de carga inicial (Splash Screen) con el logo pulsando mientras el backend despierta (√∫til para servidores gratuitos que entran en reposo).

A√±ade un bot√≥n oculto o comando de consola 'Cr√©ditos' que muestre: 'Forjado por [Tu Nombre] y S.A.M. - TFM 2026'.

Realiza una √∫ltima revisi√≥n de c√≥digo (Linting) para eliminar console.log innecesarios antes de subir a producci√≥n. Tono Solemne. Misi√≥n Cumplida."