üõ°Ô∏è D√çA 06: LA FORJA DE EREBOR E INVENTARIO (RECOMPENSAS)
Bloque 1: El Algoritmo de Bot√≠n (Loot System)
Contexto: Cada misi√≥n cumplida debe generar una recompensa tangible. No hay victoria sin despojo. Prompt:

"SAM, iniciamos el D√≠a 06. Necesito implementar el Sistema de Bot√≠n.

Crea una funci√≥n en el servidor generarRecompensa(categoria, dificultad) que se dispare cuando una tarea pase a is_completed: true.

Implementa una tabla de probabilidades para materiales:

Comunes (80%): Hierro, Cuero, Madera.

Raros (15%): Acero de Gondor, Telas √âlficas.

Legendarios (5%): Mithril, Fragmentos de Narsil.

La probabilidad debe estar influenciada por la categor√≠a (ej: 'Estudio' da m√°s materiales de escritura, 'Salud' da hierbas/consumibles).

Escribe un Test Unitario que simule 100 finalizaciones de tarea y verifique que la distribuci√≥n de materiales en la tabla inventory sigue las leyes de probabilidad marcadas. Usa LaTeX para definir la f√≥rmula de probabilidad si es necesario."

Bloque 2: Gesti√≥n de la Mochila (Inventory UI)
Contexto: El usuario necesita ver sus recursos acumulados en una interfaz limpia y funcional. Prompt:

"Sistema de bot√≠n activo. Ahora, procedemos a la Interfaz de Inventario (La Mochila).

Crea una nueva pesta√±a en el sistema de navegaci√≥n llamada 'Mochila'.

Implementa una cuadr√≠cula (grid) donde se listen los objetos de la tabla inventory del usuario autenticado.

Los objetos deben agruparse por item_name y mostrar su cantidad total acumulada.

Dise√±a tarjetas de objeto minimalistas que muestren un peque√±o sprite o icono, el nombre y el tipo de material. Al hacer clic, debe aparecer una descripci√≥n t√©cnica de para qu√© sirve en la Forja. Aplica el estilo visual de 'pergamino t√©cnico' que venimos usando en el Dashboard."

Bloque 3: El Yunque de Durin (L√≥gica de Crafteo)
Contexto: Aqu√≠ es donde el usuario gasta sus materiales para obtener Buffs (mejoras) que faciliten su productividad. Prompt:

"Inventario listo. Vamos a por el M√≥dulo de Forja.

Crea una ruta en el servidor /api/forge/craft que reciba una 'Receta' (ej: 5 Hierro + 2 Cuero = Amuleto de Enfoque).

La l√≥gica debe:

Verificar que el usuario tiene los materiales suficientes.

Restar los materiales del inventario.

Insertar el nuevo 'Artefacto' en la tabla inventory.

Define los efectos de los artefactos en un campo jsonb. Ejemplo: {"buff_xp": 1.2, "reduccion_horda": 0.1} (esto servir√° para futuras fases).

Escribe un test de integraci√≥n que intente fabricar un objeto sin materiales y verifique que el servidor devuelve un error t√°ctico 400 (Recursos insuficientes)."

Bloque 4: Integraci√≥n de Buffs en el Ecosistema
Contexto: Los objetos creados deben tener un impacto real en las m√©tricas del usuario. Prompt:

"Finalizamos el D√≠a 06 con la Activaci√≥n de Modificadores.

Modifica la funci√≥n de 'Ganancia de XP' para que aplique los multiplicadores de los artefactos que el usuario tenga en su inventario.

Si el usuario posee un 'Amuleto de Reducci√≥n de Horda', modifica el algoritmo del D√≠a 01 para que los enemigos aparezcan con un retraso adicional o en menor cantidad.

A√±ade una secci√≥n de 'Efectos Activos' en el HUD principal donde se vean los iconos de los buffs que est√°n afectando al personaje en ese momento.

Realiza un test final para asegurar que un usuario con un objeto de Mithril recibe efectivamente m√°s recompensa que uno sin √©l. Tono JARVIS, mentalidad Siempre a Muerte."