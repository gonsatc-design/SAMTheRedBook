üõ°Ô∏è D√çA 03: EL OJO DEL PALANT√çR (IA PREDICTIVA)
Bloque 1: Agregaci√≥n de Datos y Snapshot Hist√≥rico
Contexto: La IA no puede predecir el futuro si no conoce tu pasado. Necesitamos extraer los patrones de la base de datos. Prompt:

"SAM, iniciamos el D√≠a 03. Necesito preparar los datos para el Palant√≠r.

Crea una funci√≥n en el backend que recopile el historial de los √∫ltimos 7 d√≠as de la tabla daily_logs.

La funci√≥n debe estructurar un JSON con: total de tareas, porcentaje de √©xito por categor√≠a, y el 'Nivel de Sombra' (procrastinaci√≥n) alcanzado cada d√≠a.

Implementa un Test Unitario que verifique que el agregador de datos no devuelve valores nulos si un d√≠a no hubo actividad (debe devolver 0 o 'neutral').

Aseg√∫rate de que los datos est√©n anonimizados antes de ser procesados por la capa de IA. Tono anal√≠tico, JARVIS."

Bloque 2: Ingenier√≠a de Prompts Predictivos (El Or√°culo)
Contexto: Enviamos la data a Gemini para que act√∫e como un estratega de guerra. Prompt:

"Datos listos. Ahora, configuramos la conexi√≥n con la Gemini API para la fase predictiva.

Dise√±a un System Prompt avanzado para Gemini donde su rol sea: 'Estratega del Palant√≠r de S.A.M.'.

El prompt debe recibir el JSON hist√≥rico y analizar patrones de comportamiento (ej: 'El usuario falla misiones de ESTUDIO cuando el volumen de misiones de TRABAJO es > 5').

La IA debe devolver un objeto JSON con:

probabilidad_fallo: (0-100).

alerta: Un mensaje corto y directo (ej: 'Se detecta fatiga cr√≠tica para ma√±ana').

sugerencia: Una acci√≥n t√°ctica (ej: 'Planifica gestas tipo Hobbit/Hogar para compensar').

Escribe un test que mockee la respuesta de Gemini para asegurar que el servidor maneja correctamente un posible error de cuota o de red de la API."

Bloque 3: El Componente Visual Palant√≠r (HUD)
Contexto: No queremos un chat, queremos una alerta visual de "peligro" en la interfaz. Prompt:

"La IA ya predice, ahora necesito verlo en el frente.

Crea un nuevo componente visual en el index.html llamado 'El Ojo del Palant√≠r'. Debe ser un orbe o widget minimalista en la esquina del HUD.

El orbe debe cambiar de color seg√∫n la probabilidad_fallo:

0-30%: Azul/Blanco (Cielo despejado).

31-70%: √Åmbar (Niebla en el camino).

71-100%: Rojo/Fuego (El Ojo est√° sobre ti).

Al pasar el cursor (hover), debe desplegar la sugerencia t√°ctica de la IA con un efecto de desenfoque de cristal (glassmorphism).

Aplica una animaci√≥n CSS de 'resplandor' (glow) que aumente de intensidad seg√∫n el peligro."

Bloque 4: Templado de la IA (TDD de Predicci√≥n)
Contexto: Probar que la interfaz reacciona a lo que dice la IA sin romper el resto del sistema. Prompt:

"Finalizamos el D√≠a 03 con el Test de Integraci√≥n del Or√°culo.

Crea un script de test que simule una respuesta de 'Alerta Roja' del Palant√≠r.

Verifica mediante Jest/Testing Library que el componente del orbe adquiere la clase CSS de peligro y que el mensaje de sugerencia se inyecta correctamente en el DOM.

Aseg√∫rate de que esta llamada a la IA sea eficiente y no se dispare en cada recarga (implementa un cach√© simple en localStorage de 1 hora para no quemar tokens). Dame el c√≥digo siguiendo el est√°ndar de calidad 'Siempre a Muerte'."